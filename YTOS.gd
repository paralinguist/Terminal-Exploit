extends Node2D

var input = ''
var processes = []
var cpu_slots = []
var idle_slots = []
var multi = 1

func _ready():
	pass


func _on_Button_pressed():
	var process = Node2D.new()
	var process_button = Button.new()
	process_button.icon = load("res://48c516ab2df410a1a5744a02023fb40e.png")
	process_button.name = str(multi)
	process_button.add_to_group('buttons')
	process.add_child(process_button)
	process.position = Vector2(100*multi, 400)
	add_child(process)
	
	for button in get_tree().get_nodes_in_group("buttons"):
		button.connect("pressed", self, "_some_button_pressed", [button])
	
	multi += 1

	# [process_id, status, I/O_event, idle/CPU, slot]
	processes.append([processes.size(), 'yellow', false, 'idle', 0])
	for i in processes:
		print(i)
	
	$CanvasLayer/RichTextLabel.text = str("CPU processes: \n", "\nIDLE processes: \n", processes)

func _some_button_pressed(button):
	print(button.name)

func input(data):
	var type = data.split(':')[0]
	data = data.right(6).split('|')
	
	if type == 's_prc':
		pass
	elif type == 's_I/O':
		pass

func _on_TextEdit_text_changed():
	input($CanvasLayer/TextEdit.text)
